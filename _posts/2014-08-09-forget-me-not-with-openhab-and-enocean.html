---
layout: post
title: '"Forget Me Not" with openHAB and EnOcean'
date: '2014-08-09T22:41:00.000+02:00'
author: Kai Kreuzer
tags:
- EnOcean
- forget_me_not
- eclipse
- openhab
- element14
- Smart Home
modified_time: '2014-08-09T22:42:28.768+02:00'
thumbnail: http://1.bp.blogspot.com/-5JMGfa6DhVg/U-aGJ_QSXYI/AAAAAAAAHaA/mzH1lzDHdjI/s72-c/EnOceanHAB.jpg
blogger_id: tag:blogger.com,1999:blog-5335810078566775677.post-4349297760196518800
blogger_orig_url: http://kaikreuzer.blogspot.com/2014/08/forget-me-not-with-openhab-and-enocean.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">You might have heard about the <a href="http://www.element14.com/community/community/design-challenges/forget-me-not" target="_blank">Forget Me Not Design Challenge</a> that has been organised by <a href="http://www.element14.com/community/welcome" target="_blank">element14</a>. There were brilliant submissions and the participants for the challenge have been chosen end of July. As <a href="http://www.openhab.org/" target="_blank">openHAB</a> and <a href="http://iot.eclipse.org/" target="_blank">EclipseIoT</a> are both sponsors, I am personally very much looking forward to the results of this challenge.<br /><br />As all participants received hardware from <a href="http://www.enocean.com/" target="_blank">EnOcean</a> (who is another sponsor), a major use case is accessing EnOcean devices with openHAB. While there is an <a href="https://github.com/openhab/openhab/wiki/EnOcean-Binding" target="_blank">EnOcean binding</a> for openHAB since quite a while already, there are a few glitches that you could come across when using it with a Raspberry Pi or even an <a href="http://www.enocean.com/en/enocean-pi/" target="_blank">EnOcean Pi</a> (as the participants do), so I will try to provide some helpful information here.<br /><br />First of all, setting up the Raspberry Pi and installing openHAB is quite straight forward - Inderpreet has compiled a <a href="http://www.element14.com/community/community/design-challenges/forget-me-not/blog/2014/08/05/ip-post-4-obligatory-install-tutorial-for-rpi-and-openhab" target="_blank">very good tutorial for this</a> - thanks!<br /><br />If you then add the EnOcean binding in your addons folder, configure the serial port (which is /dev/ttyAMA0 for any board attached to the GPIO pins (as is the EnOcean Pi module), add some binding configuration to an item and start up openHAB you will see - <a href="https://groups.google.com/forum/#!searchin/openhab/enocean$20pi/openhab/p3Efdx61lW4/7gdpHE9wX2AJ" target="_blank">nothing</a>.<br /><br /><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="http://1.bp.blogspot.com/-5JMGfa6DhVg/U-aGJ_QSXYI/AAAAAAAAHaA/mzH1lzDHdjI/s1600/EnOceanHAB.jpg" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" src="http://1.bp.blogspot.com/-5JMGfa6DhVg/U-aGJ_QSXYI/AAAAAAAAHaA/mzH1lzDHdjI/s1600/EnOceanHAB.jpg" height="425" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">The EnOcean Pi module fits nicely into the <a href="http://www.thingiverse.com/thing:133315" target="_blank">openHAB Raspberry Pi case</a></td></tr></tbody></table>Now, there are three things to do to make it work:<br /><br /><ol style="text-align: left;"><li>The first step is to <a href="https://github.com/lurch/rpi-serial-console" target="_blank">disable the Raspberry Pi's serial console</a>.&nbsp;</li><li>Next, you need to make sure that the user under which you run openHAB <a href="http://elinux.org/RPi_Serial_Connection#Linux_terminal_set_up" target="_blank">belongs to the group "dialout"</a>, otherwise you won't have access to the serial port.</li><li>In theory, the EnOcean Pi module can now be accessed. Unfortunately, the RXTX library that is used by openHAB for connecting to serial ports does not consider<span style="font-family: Courier New, Courier, monospace; font-size: x-small;">&nbsp;/dev/ttyAMA0</span> to be a standard port and thus simply does not recognise it. You therefore <a href="https://github.com/openhab/openhab/wiki/Samples-Tricks#how-to-configure-openhab-to-connect-to-device-symlinks-on-linux" target="_blank">have to explicitly declare it </a>through the JVM parameter <span style="font-family: Courier New, Courier, monospace; font-size: x-small;">"-Dgnu.io.rxtx.SerialPorts=/dev/ttyAMA0"</span> in the start(_debug).sh launch script.</li></ol><div>Starting openHAB after making these changes leads to the desired result:</div><br /><div><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">20:13:44.588 INFO &nbsp;o.o.b.e.i.bus.EnoceanBinding[:290] - Connecting to Enocean [serialPort='/dev/ttyAMA0' ].</span></div><div><span style="font-family: Courier New, Courier, monospace; font-size: x-small;">20:13:45.951 INFO &nbsp;org.enocean.java.ESP3Host[:66] - starting receiveRadio..&nbsp;</span></div><div><span style="font-family: Courier New, Courier, monospace; font-size: x-small;"><br /></span></div><div>A last remark: EnOcean is a pretty cool technology for sensors and this is what it is mainly used for. Nonetheless there are also actuators available and if you try one of these with openHAB you will notice that the current binding does not bring support for EnOcean actuators. There is hence no official solution for this problem. Still, there is somebody working on <a href="https://github.com/aleon-GmbH/aleoncean-openhab-binding" target="_blank">another EnOcean binding</a> for openHAB, which also has <a href="https://github.com/aleon-GmbH/aleoncean-openhab-binding/blob/master/doc/eep/supported.md" target="_blank">actuators in the scope</a>. As far as I know, this is still in an early stage, but if you really want to go for actuators, you might want to try it out.</div><div><br /></div></div>